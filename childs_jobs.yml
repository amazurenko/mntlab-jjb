- job-template: 
      name: 'MNTLAB-{student}-child{number}-build-job'
      parameters:
          - dynamic-choice:
                name: BRANCH_NAME
                script: |                
                    def gitURL = "https://github.com/amazurenko/mntlab-jjb.git"
                    def command = "git ls-remote -h $gitURL"
                    def proc = command.execute()
                    proc.waitFor()
                    if ( proc.exitValue() != 0 ) {{
                    println "Error, ${{proc.err.text}}"
                    System.exit(-1)
                    }}
                    def branches = proc.in.text.readLines().collect {{
                    it.replaceAll(/[a-z0-9]*\trefs\/heads\//, '')
                    }}
                    return branches
      scm:
          - git:
                url: https://github.com/amazurenko/mntlab-jjb.git
                branches:
                    - ${{BRANCH_NAME}}
                    
      builders:
          - shell: |
                chmod +x ./script.sh
                echo ${{BRANCH_NAME}}
                ls -al
                ./script.sh > output.txt
                tar cfz ${{BRANCH_NAME}}_jjb_templates.tar.gz -C ./ *.yml *.ini *.txt
       
      publishers:
          - archive:
                artifacts: '*.tar.gz,*.txt' 
- project: 
   name: myprojeict
   student: vshulhach
   target: build
   number:
       - 1
       - 2
       - 3
       - 4
   jobs:
    - 'MNTLAB-{student}-child{number}-build-job'
