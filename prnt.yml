---

- job-template:
      name: 'MNTLAB-{student}-main-{target}-job'
      parameters:
          - dynamic-choice:
                name: BRANCH_NAME
                script: |
                    def list = ["karotkin", "master"]
          - raw:
                xml: |
                    <com.cwctravel.hudson.plugins.extended__choice__parameter.ExtendedChoiceParameterDefinition plugin="extended-choice-parameter@0.74">
                    <name>Jobs</name>
                    <description></description>
                    <quoteValue>false</quoteValue>
                    <saveJSONParameterToFile>false</saveJSONParameterToFile>
                    <visibleItemCount>4</visibleItemCount>
                    <type>PT_CHECKBOX</type>
                    <value>MNTLAB-karotkin-child1-build-job,MNTLAB-karotkin-child2-build-job,MNTLAB-karotkin-child3-build-job,MNTLAB-karotkin-child4-build-job</value>
                    <multiSelectDelimiter>,</multiSelectDelimiter>
                    <projectName>MNTLAB-pasiukevich-main-build-job</projectName>
                    </com.cwctravel.hudson.plugins.extended__choice__parameter.ExtendedChoiceParameterDefinition>
      builders:
            - trigger-builds:
                - project: "MNTLAB-karotkin-child-build-job"
                  predefined-parameters:
                      BRANCH_NAME=${{BRANCH_NAME}}
                  block: true

- project:
        name: MNT-parent
        student: "karotkin"
        target: build
        jobs:
            - 'MNTLAB-{student}-main-{target}-job'
